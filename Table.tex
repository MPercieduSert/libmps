\documentclass[a4paper,10pt]{article}

\usepackage[right=0.5cm,left=0.5cm,top=0.5cm,bottom=1.75cm]{geometry}
\usepackage{pgf}
\usepackage{tikz}
\usepackage[utf8]{inputenc}
\usepackage{xargs}
\usetikzlibrary{arrows,automata}
\usetikzlibrary{matrix}
\usetikzlibrary{positioning}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{shapes.multipart}

\tikzset{
	entity/.style={
		rectangle split,
		rectangle split parts=2,
		draw=black, very thick,
		inner sep=2pt,
		text centered,
	},
	table/.style={
		rectangle split,
		rectangle split parts=3,
		draw=black, very thick,
		inner sep=2pt,
		text centered,
	},
	relation/.style={
	ellipse,
	draw=black, very thick,
	inner sep=2pt,
	text centered,
	},
	lien/.style={
	fill=white,
	%above,
	%sloped,
	},
	relationWithAttribut/.style={
		ellipse split,
		draw=black, very thick,
		inner sep=2pt,
		text centered,
	},
}
\newcommandx{\entity}[3][3=]{
\node[entity,#3] (#1) {
	#1
	\nodepart{two}
	\begin{tabular}{l}
		#2
	\end{tabular}};
}
\newcommandx{\relation}[2][2=]{
	\node[relation,#2](#1){#1};
}
\newcommandx{\relationWithAttribut}[3][3=]{
\node[relationWithAttribut,#3](#1)
{#1 \nodepart{lower} #2};
}
\newcommandx{\relationWithAttributs}[3][3=]{
	\node[relationWithAttribut,#3](#1)
	{#1 \nodepart{lower} 	\begin{tabular}{l}
			#2
	\end{tabular}};
}

\newcommand{\lien}[3]{\path (#1) edge node[lien] {#3} (#2);}
\newcommandx{\tableEntity}[4][4=]{
	\node[table,#4] (#1) {
		#1
		\nodepart{two}
		\begin{tabular}{l@{\ \ :}l@{\ \ [}l@{](}l@{)}l  }
			id & uint &id&ID&\\
			#2
		\end{tabular}
		\nodepart{three}
		\begin{tabular}{l}
			primary key (id)\\
			#3
		\end{tabular}
	};
}
\newcommand{\lkey}[2]{\path[<-] (#1) edge (#2);}
\newcommand{\lkeyloop}[1]{\draw[->] (#1.north west) ..controls+(60:1.25cm) and +(120:1.25cm) .. (#1.95);}
\newcommand{\fkey}[2]{foreign key (#1) $\to$ #2}
\newcommand{\unique}[1]{unique (#1)}
%Arbre
\newcommandx{\arbreERD}[2][2=]{
	\node[relation,#2](filiation#1){filiation#1};
	\entity{Arbre#1}{feuille\\num}[above=0.75cm of filiation#1]
	\node[relation,above=1.65cm of Arbre#1](parent#1){parent#1};
}
\newcommand{\lienArbreERD}[1]{
	\lien{Arbre#1.north west}{parent#1.west}{\begin{tabular}{c}fils\\$0-N$\end{tabular}}
	\lien{Arbre#1.north east}{parent#1.east}{\begin{tabular}{c}parent\\$0-1$\end{tabular}}
	\lien{Arbre#1.south}{filiation#1.north}{$1$}
}
\newcommandx{\arbreTable}[2][2=]{
	\tableEntity{Arbre#1}{
		feuille & bool &bool& fl &\\
		num& int &intSup0& num&\\
		parent & uint &idSup1Null& pt & NULL\\
	}{
		\fkey{parent}{Arbre#1}\\
		\unique{parent, num}
	}{#2}
}
\newcommand{\lkeyArbre}[1]{\lkeyloop{Arbre#1}}
\newcommand{\ent}{purple}
\newcommand{\bdd}{blue}
\newcommand{\gui}{violet}
\begin{document}
\section{Predef}
\subsection{Commentaire}
\subsubsection{ERD}
\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =2.5cm, row sep =0.5cm]{
		\entity{Commentaire}{
		creation \\
		modification \\
		texte} 
		\&
		\relationWithAttribut{CiblageCommentaire}{num}
		\&
		\entity{CibleCommentaire}{
			idCible  \\
			cible  \\
			dateTime 
			}\\
		\hline\\
		};
	\lien{Commentaire.east}{CiblageCommentaire.west}{$0-N$}
	\lien{CibleCommentaire.west}{CiblageCommentaire.east}{$1$}
\end{tikzpicture}

\subsubsection{Tables}

\begin{tikzpicture}[thick]
\matrix[ampersand replacement=\&,column sep =1cm,row sep =0.5cm]{
	\tableEntity{Commentaire}{
		creation & dateTime&dtValide&crea & \\
		modification & dateTime&dtCurrent& modif  & \\
		texte & text &string& text & NULL
	}{ }[\bdd]	
	\&	
	\tableEntity{CibleCommentaire}{
		idCommentaire & uint&idSup1 & idCm &\\
		idCible & uint & idSup1& idCb& \\
		cible & int& int & cb & \\
		dateTime & dateTime&dtCurrent & dt & \\
		num & int &intSup0& num&
	}{
		\fkey{idCommentaire}{Commentaire}\\
		\unique{idCible, cible, num}
	}[\bdd]\\
	\hline\\
};
\lkey{Commentaire}{CibleCommentaire}
\end{tikzpicture}
\subsection{Donn√©e}
\subsubsection{ERD}
\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =1.5cm, row sep =0.75cm]{
		\arbreERD{Donnee}
		\&
		\relation{calibrageDonnee}
		\&
		\entity{DonneeCard}{
			cible\\
			card\\
			exact
		}\\
		\entity{Donnee}{
			idProg\\
			nom\\
			type\\
			tpVal
		}
		\&
		\relation{ciblageDonnee}
		\&
		\entity{DonneeCible}{
			idCible\\
			cible\\
			dateTime\\
			num\\
			valeur
		}\\
		\hline\\	
	};

	\lienArbreERD{Donnee}
	\lien{filiationDonnee}{Donnee}{$0-1$}
	\lien{Donnee}{ciblageDonnee}{$0-N$}
	\lien{ciblageDonnee}{DonneeCible}{$1$}
	\lien{Donnee}{calibrageDonnee}{$0-N$}
	\lien{calibrageDonnee}{DonneeCard}{$1$}
	\end{tikzpicture}
\subsubsection{Tables}

\begin{tikzpicture}[thick]
\matrix[ampersand replacement=\&,column sep =1cm, row sep =1cm]{
	\arbreTable{Donnee}
	\&
	\tableEntity{DonneeCard}{
		idDonnee& int &int& idDn &\\
		card& int & int& cd &\\
		cible&int&int&cb&\\
		exact&uint&code&ex&
	}{
		%\fkey{idDonnee}{Donnee}\\
		\unique{idDonnee, cible}\\
		ModifControle*
	}[\bdd]\\
	\tableEntity{Donnee}{
		nom&text&stringNotEmpty&nm&\\
		type&uint&idSup1&tp&\\
		tpVal&int&int&tpV\\
		idProg&uint&idSup1NULL&idPg&NULL\\
	}{
		\fkey{id}{ArbreDonnee}\\
		\fkey{type}{Type}*\\
		\unique{idProg}\\
		ArbreModifControle*
	}[\bdd]
	\&
	\tableEntity{DonneeCible}{
		idDonnee&int&int&idDn&\\
		idCible&uint&idSup1&idCb&\\
		cible&int&int&cb&\\
		dateTime&dateTime&dtCurrent&dt&\\
		num&int&intSup0&num&\\
		valeur&blod&variant&val&NULL
	}{
		\unique{idDonnee, idCible, cible, num}\\
		ModifControle*
	}[\bdd]\\
	\hline\\
};
\lkeyArbre{Donnee}
\lkey{ArbreDonnee}{Donnee}
\path[<-] (Donnee) edge[dashed] (DonneeCible);
\path[<-] (Donnee) edge[dashed] (DonneeCard);
\end{tikzpicture}

\subsection{Historique et Utilisation}
\subsubsection{ERD}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =1.5cm, row sep =0.5cm]{
		\arbreERD{Usage}
		\&
		\entity{Utilisation}{
			
			idCible\\
			cible\\
			idEtat\\
			etat\\
			num\\
			dateTime
		}
		\&
		\entity{Historique}{
			idCible\\
			cible\\
			idEtat\\
			etat\\
			num\\
			dateTime
		}\\
		\entity{Usage}{
			nc\\
			nom\\
			type
		}
		\&
		\relation{designationUtilisation}
		\&
		\\
		\hline\\
	};
	\lienArbreERD{Usage}
	\lien{filiationUsage}{Usage}{$1$}
	\lien{Utilisation}{designationUtilisation}{$1$}
	\lien{Usage}{designationUtilisation}{$0-N$}	
	\end{tikzpicture}
	\subsubsection{Tables}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =1cm, row sep =0.7cm]{
		\arbreTable{Usage}
		\&
		\tableEntity{Usage}{
			nc&text&stringNotEmpty&nc&\\
			nom&text&stringNotEmpty&nm&\\
			type&uint&idSup1&tp&
		}{
			\fkey{id}{ArbreUsage}\\
			\fkey{type}{Type}*\\
			\unique{nom, type}\\
			ArbreModifControle*
		}[\bdd]
		\\
		\tableEntity{Historique}{
			idCible&uint&idSup1&idCb&\\
			idEtat&uint&idSup1&idEt&\\
			cible&int&int&cb&\\
			dateTime&dateTime&dtValide&dt&\\
			etat&int&int&et&\\
			num&int&intSup0&num&
		}{
			\unique{idCible, cible, num}
		}[\bdd]
		\&
		\tableEntity{Utilisation}{
			idUsage&uint&idSup1&idUs&\\
			idCible&uint&idSup1&idCb&\\
			idEtat&uint&idSup1&idEt&\\
			cible&int&int&cb&\\
			dateTime&dateTime&dtValide&dt&\\
			etat&int&int&et&\\
			num&int&intSup0&num&
		}{
			\fkey{idUsage}{Usage}\\
			\unique{idCible, cible, num}
		}[\bdd]\\
		\hline\\
	};
	\lkeyArbre{Usage}
	\lkey{ArbreUsage}{Usage}
	\lkey{Usage}{Utilisation}
	\end{tikzpicture}
	
	\subsection{MotCle}
	\subsubsection{ERD}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =.5cm, row sep =1cm]{
		\entity{MotProgPermission}{
			cible\\
			idProg\\
			code
		}
		\&
		\relation{controleProg}
		\&
		\arbreERD{MotCle}
		\&
		\relation{controleMotCle}
		\&
		\entity{MotClePermission}{
			cible\\
			code
		}\\
		\entity{MotProgCible}{
			idCible\\
			cible\\
			idProg
		}
		\&
		\relation{ciblageProg}
		\&
		\entity{MotCle}{
			nc\\
			nom
		}
		\&
		\relation{ciblageMotCle}
		\&
		\entity{MotCleCible}{
			idCible\\
			cible
		}\\
		\hline\\	
	};
	\lienArbreERD{MotCle}
	\lien{filiationMotCle}{MotCle}{$1$}
	\lien{MotCle}{ciblageMotCle}{$0-N$}
	\lien{ciblageMotCle}{MotCleCible}{$1$}
	\lien{MotCle}{controleMotCle}{$0-N$}
	\lien{controleMotCle}{MotClePermission}{$1$}
	\lien{MotCle}{ciblageProg}{$0-N$}
	\lien{ciblageProg}{MotProgCible}{$1$}
	\lien{MotCle}{controleProg}{$0-N$}
	\lien{controleProg}{MotProgPermission}{$1$}  
	\end{tikzpicture}
	
	\subsubsection{Tables}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =.25cm, row sep =0.25cm]{
		\tableEntity{MotProgPermission}{
			idProg&int&int&idPg\\
			idMotCle& uint &idSup1& idMC &\\
			cible&int&int&cb&\\
			code& uint &code& cd \\
		}{
			\fkey{idMotCle}{MotCle}\\
			\unique{idProg, idMotCle, cible}
		}[\bdd]
		\&
		\arbreTable{MotCle}	
		\&
		\tableEntity{MotClePermission}{
			idMotCle& uint &idSup1& idMC &\\
			cible&int&int&cb&\\
			code& uint &code& cd &
		}{
			\fkey{idMotCle}{MotCle}\\
			\unique{idMotCle, cible}\\
			ModifControlePermissionCode*
		}[\bdd]\\
		\tableEntity{MotProgCible}{
			idProg&int&int&idPg&\\
			idMotCle&uint&idSup1&idMC&\\
			idCible&uint&idSup1&idCb&\\
			cible&int&int&cb&
		}{
			\fkey{idMotCle}{MotCle}\\
			\unique{idProg, idCible, cible}
		}[\bdd]
		\&
		\tableEntity{MotCle}{
			nc&text&stringNotEmpty&nc&\\
			nom&text&stringNotEmpty&nm&
		}{
			\fkey{id}{ArbreMotCle}\\
			ArbreModifControle*
		}[\bdd]
		\&
		\tableEntity{MotCleCible}{
			idMotCle&uint&idSup1&idMC&\\
			idCible&uint&idSup1&idCb&\\
			cible&int&int&cb&
		}{
			\fkey{idMotCle}{MotCle}\\
			\unique{idMotCle, idCible, cible}
		}[\bdd]\\
		\hline\\
	};
	\lkeyArbre{MotCle}
	\lkey{ArbreMotCle}{MotCle}
	\lkey{MotCle}{MotClePermission}
	\lkey{MotCle}{MotCleCible}
	\lkey{MotCle}{MotProgCible}
	\lkey{MotCle}{MotProgPermission}  
	\end{tikzpicture}
	\subsection{Restriction et Version}
	\subsubsection{ERD}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =3cm, row sep =0.1cm]{
		\entity{Restriction}{
			idCible\\
			cible\\
			code	
		}
		\&
		\entity{Version}{
			num\\
			dateTime
		}\\
		\hline\\
	};
	\end{tikzpicture}
	\subsubsection{Tables}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =1.5cm, row sep =0.1cm]{
		\tableEntity{Restriction}{
			idCible&uint&idSup1&idCb&\\
			cible&int&int&cb&\\
			code&uint&code&cd&	
		}{
			\unique{idCible,cible}\\
			PermissionCode
		}[\bdd]
		\&
		\tableEntity{Version}{
			dateTime&dateTime&dtCurrent&dt&\\
			num&int&intSup0&num&
		}{
			\unique{num}
		}[\bdd]\\
		\hline\\
	};
	\end{tikzpicture}
	\subsection{Texte}
	\subsubsection{ERD}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =3cm, row sep =0.25cm]{
		\entity{Texte}{
			creation\\
			modification\\
			texte
		}
		\&
		\relationWithAttribut{ciblageTexte}{num}
		\&
		\entity{TexteCible}{
			idCible\\
			cible\\
			type\\
			dateTime
		}\\
		\&
		\relation{sourceTexte}
		\&
		\entity{Source}{
			nc\\
			nom\\
			type
		}\\
		\hline\\
	};
	\lien{Texte}{ciblageTexte}{$0-N$}
	\lien{ciblageTexte}{TexteCible}{$1$}
	\lien{Texte}{sourceTexte}{$1-N$}
	\lien{sourceTexte}{Source}{$0-N$}
	\end{tikzpicture}
	\subsubsection{Tables}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =1.5cm, row sep =0.25cm]{
		\tableEntity{Texte}{
			creation&dateTime&dtValide&crea&\\
			modification&dateTime&dtCurrent&modif&\\
			texte&text&string&txt&NULL
		}{}[\bdd]
		\&
		\tableEntity{TexteCible}{
			idTexte&uint&idSup1&idTxt&\\
			idCible&uint&idSup1&idCb&\\
			cible&int&int&cb&\\
			dateTime&dateTime&dtCurrent&dt\\
			num&int&intSup0&num&\\
			type&uint&idSup1&tp&
		}{
			\fkey{idTexte}{Texte}\\
			\fkey{type}{Type}*\\
			\unique{idCible, cible, type, num}
		}[\bdd]\\
		\tableEntity{SourceTexte}{
			idSource&uint&idSup1&idSr&\\
			idTexte&uint&idSup1&idTxt&
		}{
			\fkey{idTexte}{Texte}\\
			\fkey{idSource}{Source}\\
			\unique{idTexte, idSource}
		}[\bdd]
		\&
		\tableEntity{Source}{
			nc&text&stringNotEmpty&nc&\\
			nom&text&stringNotEmpty&nm&\\
			type&uint&idSup1&tp	
		}{
			\fkey{type}{Type}*\\
			\unique{nom}
		}[\bdd]\\
		\hline\\
	};
	\lkey{Texte}{TexteCible}
	\lkey{Texte}{SourceTexte}
	\lkey{Source}{SourceTexte}
	\end{tikzpicture}
	\subsection{Type}
	\subsection{ERD}
	\begin{tikzpicture}[thick]
	\matrix[ampersand replacement=\&,column sep =3cm, row sep =0.5cm]{
		\entity{Type}{
			idProg\\
			nc\\
			nom
		}	
		\node[relation,above=1.65cm of Type](parentType){parentType};
		\&
		\relation{controleType}
		\&
		\entity{TypePermission}{
			cible\\
			code
		}\\
		\hline\\
	};
	\lien{Type}{controleType}{$0-N$}
	\lien{controleType}{TypePermission}{$1$}
	\lien{Type.north west}{parentType.west}{\begin{tabular}{c}fils\\$0-N$\end{tabular}}
	\lien{Type.north east}{parentType.east}{\begin{tabular}{c}parent\\$0-1$\end{tabular}}
	\end{tikzpicture}
\subsubsection{Tables}
	

\begin{tikzpicture}[thick]
\matrix[ampersand replacement=\&,column sep =1.5cm, row sep =0.5cm]{
	\tableEntity{Type}{
		idProg&uint&idSup1Null&idPg&NULL\\
		parent&uint&idSup1Null&pt&NULL\\
		nc&text&stringNotEmpty&nc&\\
		nom&text&stringNotEmpty&nm&	
	}{
		\fkey{parent}{Type}\\
		\unique{idProg}\\
		\unique{nom}\\
		ArbreSimpleModifControle*
		
	}[\bdd]
	\&
	\tableEntity{TypePermission}{
		idType&uint&idSup1& idTp &\\
		cible&int&int&cb&\\
		code&uint&code& cd &
	}{
		\fkey{idType}{Type}\\
		\unique{idType, cible}\\
		ModifControle
	}[\bdd]\\
	\hline\\
};
\lkey{Type}{TypePermission}
\lkeyloop{Type}
\end{tikzpicture}
\subsection{Calendrier}
\subsubsection{ERD}
\begin{tikzpicture}[thick]
\matrix[ampersand replacement=\&,column sep =2cm, row sep =0.5cm]{
	
	
	\entity{Evenement}{
		creation\\
		modification\\
		debut\\
		fin\\
		nc\\
		nom\\
		titre\\
		code\\
		type
	}
	\&
	\relation{affiche}
	\&
	\entity{EvenementStyle}{
		nom\\
		policeNom\\
		couleurNom\\
		policeTexte\\
		couleurTexte\\
		policeTitre\\
		couleurTitre\\
		couleurFond\\
		texture\\
		forme\\
		bordure\\
		couleurBordure
	}\\
	\&
	\relation{ciblageEvenement}
	\&
	\entity{EvenementCible}{
		idCible\\
		cible\\
		dateTime\\
		num\\
		tpVal\\
		valeur
	}\\
	\hline\\
};
\lien{Evenement}{affiche}{$1$}
\lien{affiche}{EvenementStyle}{$0-N$} 
\lien{Evenement}{ciblageEvenement}{$0-N$}
\lien{ciblageEvenement}{EvenementCible}{$1$}
\end{tikzpicture}
\subsubsection{Table}
\begin{tikzpicture}[thick]
\matrix[ampersand replacement=\&,column sep =1cm, row sep =0.5cm]{
		\tableEntity{Evenement}{
		idStyle&uint&idSup1&idSt\\
		code&uint&code&cd\\
		creation&dateTime&dtValide&crea\\
		debut&dateTime&dtValide&deb\\
		fin&deteTime&dtValide&fin\\
		modification&dateTime&dtCurrent&modif\\
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		titre&text&stringNotEmpty&tit\\
		type&uint&idSup1&tp
	}{
		\fkey{idStyle}{Style}\\
		\unique{nom}
	}
	\&
	\tableEntity{EvenementCible}{
		idEvenement&uint&idSup1&idEv\\
		idCible&uint&idSup1&idCb\\
		cible&int&int&cb\\
		dateTime&dateTime&dtCurrent&dt\\
		num&int&intSup0&num\\
		tpVal&int&int&tpV\\
		valeur&blod&variant&val
	}{
		\fkey{idEvenement}{Evenement}\\
		\unique{idEvenement, idCible, cible, num}
	}
	\\
	\tableEntity{EvenementStyle}{
		bordure&int&int&bd\\
		couleurBorbure&text&couleur&cb\\
		couleurFond&text&couleur&cf\\
		couleurTexte&text&couleur&cte\\
		couleurTitre&text&couleur&cti\\
		forme&int&int&fm\\
		nom&text&stringNotEmpty&nm\\
		policeTexte&text&font&pte\\
		policeTitre&text&font&pti\\
		texture&int&brush&tx
	}{
		\unique{nom}
	}
	\\
	\hline\\
};
\lkey{Evenement}{EvenementCible}
\lkey{EvenementStyle}{Evenement}  
\end{tikzpicture}

\section{Inventaire}
\subsection{Predef utilis√©es}
\begin{itemize}
	\item Commentaire
	\item Donn√©e
	\item Mot Cl√©
	\item Restriction
	\item Type
	\item Version
\end{itemize}
\subsection{ERD}

\begin{tikzpicture}[thick]


	
	
		\entity{Etat}{
		idProg\\
		nc\\
		nom\\
		type}
	
	\arbreERD{Etat}[left=1.5cm of Etat]
	
	\relation{etatPresent}[right=1.5cm of Etat]

	\entity{Element}{num}[right=1.5cm of etatPresent]

	\relation{utilisation}[above=1.5cm of Element]
	
	\relation{etatPasse}[above=1.75cm of etatPresent]

	
	
	\entity{Historique}{
	dateTime\\
	num
	}[above=1.5cm of utilisation]

	\relation{designationUsage}[left=0.5cm of Historique]

	\entity{Usage}{
		nc\\
		nom\\
		type
	}[left=1.25cm of designationUsage]

	\arbreERD{Usage}[above=1cm of parentEtat]
	
	
	\relation{instance}[below=2cm of Element]
	
	\relation{acquisitionElement}[right=1.5cm of Element]
	
		\entity{Acquisition}{
		nc\\
		nom\\
		dateTime\\
		type}[above=1.5cm of acquisitionElement]
	
	\entity{Collection}{
		nc\\
		nom\\
		type}[below=2cm of instance]
	
	\arbreERD{Collection}[right=1.5cm of Collection]
	
	\relationWithAttribut{composition}{
		\begin{tabular}{l}
		num\\
		type\\
		valeur
		\end{tabular}}[left=1.25cm of Collection]

	\entity{Ingredient}{
		nc\\
		nom\\
		type}[left=1.25cm of composition]
	
	\arbreERD{Ingredient}[left=1cm of Ingredient]
	
	\relationWithAttribut{origine}{type}[below=1.5cm of Collection]
	
	\entity{Geographie}{
		nc\\
		nom\\
		type}[below=1.5cm of origine]

	\arbreERD{Geographie}[right=1.25cm of Geographie]

	
	\entity{Valeur}{
		idCible\\
		cible\\
		num\\
		dateTime\\
		type\\
		valeur
	}[left=2cm of Geographie]

\lien{Etat}{etatPresent}{$0-N$}
\lien{Acquisition}{acquisitionElement}{$1-N$}
\lien{filiationEtat}{Etat}{1}
\lienArbreERD{Etat}
\lien{Element}{etatPresent}{$1$}
\lien{Element}{acquisitionElement}{$1$}
\lienArbreERD{Collection}
\lien{filiationCollection}{Collection}{$1$}
\lien{Collection}{instance}{$0-N$}
\lien{Element}{instance}{$1$}
\lienArbreERD{Geographie}
\lien{Geographie}{filiationGeographie}{$1$}
\lien{origine}{Geographie}{$0-N$}
\lien{Collection}{origine}{$1-N$}
\lienArbreERD{Ingredient}
\lien{filiationIngredient}{Ingredient}{$1$}
\lien{Ingredient}{composition}{$0-N$}
\lien{Collection}{composition}{$0-N$}
\lien{Element}{utilisation}{$1-N$}
\lien{utilisation}{Historique}{$1$}
\lien{Etat}{etatPasse}{$0-N$}
\lien{etatPasse}{Historique}{$1$}
\lienArbreERD{Usage}
\lien{Usage}{filiationUsage}{$1$}
\lien{Usage}{designationUsage}{$0-N$}
\lien{designationUsage}{Historique}{$1$}      
\end{tikzpicture}
\subsection{Tables}
\begin{tikzpicture}[thick]
\footnotesize
\matrix[ampersand replacement=\&,column sep =0.25cm, row sep =0.5cm]{
	\arbreTable{Usage}
	\&
	\tableEntity{Usage}{
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		type&uint&idSup1&tp
	}{
		\fkey{id}{ArbreUsage}\\
		\fkey{type}{Type}\\
		\unique{nom}\\
		ArbreModifControle
	}[\bdd]
	\\
	\arbreTable{Etat}
	\&
	\tableEntity{Etat}{
		idProg&uint&idSup1Null&idPg&NULL\\
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		type&uint&idSup1&tp
	}{
		\fkey{id}{ArbreEtat}\\
		\fkey{type}{Type}\\
		\unique{nom}\\
		\unique{idProg}\\
		ArbreModifControle
	}[\bdd]
	\&
	\tableEntity{Historique}{
	idElement&uint&idSup1&idEl\\
	idEtat&uint&idSup1&idEt\\
	idUsage&uint&idSup1&idUs\\
	dateTime&dateTime&dtValide&dt\\
	num&int&intSup0&num
	}{
		\fkey{idElement}{Element}\\
		\fkey{idEtat}{Etat}\\
		\fkey{idUsage}{Usage}\\
		\unique{idElement, num}
	}[\bdd]
	\\
	\arbreTable{Collection}
	\&
	\tableEntity{Collection}{
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		type&uint&idSup1&tp
	}{
		\fkey{id}{ArbreCollection}\\
		\fkey{type}{Type}\\
		\unique{nom}\\
		ArbreModifControle
	}[\bdd]
	\&
	\tableEntity{Element}{
		idAcquisition&uint&idSup1&idAc\\
		idCollection&uint&idSup1&idCol\\
		idEtat&uint&idSup1&idEt\\
		num&int&intSup0&num
	}{
		\fkey{idAcquisition}{Acquisition}\\
		\fkey{idCollection}{Collection}\\
		\fkey{idEtat}{Etat}\\
		\unique{idCollection, num}
	}[\bdd]\\
	\tableEntity{Origine}{
		idCollection&uint&idSup1&idCol\\
		idGeo&uint&idSup1&idGeo\\
		type&uint&idSup1&tp
	}{
		\fkey{idCollection}{Collection}\\
		\fkey{idGeo}{Geographie}\\
		\fkey{type}{Type}\\
		\unique{idCollection, type}
	}[\bdd]
	\&
	\tableEntity{Composition}{
		idCollection&uint&idSup1&indCol\\
		idIngredient&uint&idSup1&idIng\\
		num&int&intSup0&num\\
		type&uint&idSup1&tp\\
		valeur&double&double&val
	}{
		\fkey{idCollection}{Collection}\\
		\fkey{idIngredient}{Ingredient}\\
		\fkey{type}{Type}\\
		\unique{idCollection, num}
	}[\bdd]
	\&
	\tableEntity{Acquisition}{
		dateTime&dateTime&dtValide&dt\\
		nc & text&stringNotEmpty & nc\\
		nom&text&stringNotEmpty&nm\\
		type&uint&idSup1&tp
	}{
		\fkey{type}{Type}\\
		\unique{nom}
	}[\bdd]
	\\
	\tableEntity{Geographie}{
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		type&uint&idSup1&tp
	}{
		\fkey{id}{ArbreGeographie}\\
		\fkey{type}{Type}\\
		\unique{nom}\\
		Arbre
	}[\bdd]
	\&
	\tableEntity{Ingredient}{
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		type&uint&idSup1&tp
	}{
		\fkey{id}{ArbreIngredient}\\
		\fkey{type}{Type}\\
		\unique{nom}\\
		Arbre
	}[\bdd]
	\&
	\tableEntity{Valeur}{
		idCible&uint&idSup1&idCb\\
		cible&int&int&cb\\
		dateTime&dateTime&dtValide&dt\\
		num&int&intSup0&num\\
		type&uint&idSup1&tp\\
		valeur&int&int&val
	}{
		\fkey{type}{Type}\\
		\unique{idCible, cible, num, type}
	}[\bdd]\\
	\arbreTable{Geographie}
	\&
	\arbreTable{Ingredient}
	\\
};
\lkeyloop{ArbreEtat}
\lkey{ArbreEtat}{Etat}
\lkeyloop{ArbreCollection}
\lkey{ArbreCollection}{Collection}
\lkeyloop{ArbreGeographie}
\lkey{ArbreGeographie}{Geographie}
\lkeyloop{ArbreIngredient}
\lkey{ArbreIngredient}{Ingredient}
\lkey{Etat}{Element}
\lkey{Acquisition}{Element}
\lkey{Collection}{Element}
\lkey{Collection}{Origine}
\lkey{Geographie}{Origine}
\lkey{Collection}{Composition}
\lkey{Ingredient}{Composition}
\lkey{Element}{Historique}
\lkey{Etat}{Historique} 
\lkeyloop{ArbreUsage}
\lkey{ArbreUsage}{Usage}
\lkey{Usage}{Historique}
\end{tikzpicture}
\newpage
\section{Notes}
\subsection{Predef}
\begin{itemize}
	\item Calendrier
	\item Commentaire
	\item Donn√©e
	\item Mot Cl√©
	\item Restriction
	\item Texte
	\item Type
	\item Utilisation
	\item Version
\end{itemize}
\subsection{ERD}
\begin{tikzpicture}[thick]
\matrix[ampersand replacement=\&,column sep =0.5cm, row sep =1cm]{
	\arbreERD{Cours}
	\&
	\&
	\arbreERD{MiseEnForme}
	\\
	\entity{Cours}{
		version
	}
	\&
	\relation{calibrage}
	\&
	\entity{MiseEnForme}{
		nom\\
		debut\\
		fin\\
		num\\
		valeur
	}
	\\
	\arbreERD{Exercice}\\
	\entity{Exercice}{
		type\\
		version\\
		correction
	}\\
};
\lienArbreERD{Cours}
\lienArbreERD{MiseEnForme}
\lienArbreERD{Exercice}
\lien{filiationCours}{Cours}{$1$}
\lien{filiationMiseEnForme}{MiseEnForme}{$1$}
\lien{filiationExercice}{Exercice}{$1$} 
\lien{calibrage}{Cours}{$1$}
\lien{calibrage}{MiseEnForme}{$0-N$}
\end{tikzpicture}
\newpage
\begin{tikzpicture}[thick]
\footnotesize

	\entity{TypeEtablissement}{
		nc\\
		nom
	}
	
	\relation{typageEtablissement}[below=0.75cm of TypeEtablissement]
	
	\relation{dansTypeEtablissement}[right=2cm of TypeEtablissement]
	
	\entity{Etablissement}{
		nc\\
		nom
	}[below=0.75cm of typageEtablissement]
	
	\relation{dansEtablissement}[below=1cm of dansTypeEtablissement]
	
	\relation{classeDans}[right=2cm of Etablissement]
	
	\entity{Niveau}{
		nc\\
		nom\\
		type
	}[right=3cm of dansEtablissement]

	\relation{filiationNiveau}[above=2cm of Niveau]
	
	\relation{duNiveau}[below=0.75cm of Niveau]
	
	\entity{Classe}{
		nc
		nom
		num
	}[right=2cm of classeDans]

	\relation{groupePour}[below=2.85cm of Classe]
	\entity{Annee}{
		num
	}[right=1.5cm of groupePour]

	\relation{pendant}[above=1cm of Annee]
	
	\entity{Groupe}{
		nc\\
		nom\\
		type\\
		code\\
		alpha
	}[below=0.9cm of groupePour]
	
	%\relationWithAttribut{controlePourGroupe}{num}[below=0.75cm of Groupe]
	
	%\relation{controlePourClasse}[left=3.5cm of pendant]
		
	\relationWithAttribut{dansGroupe}{num}[right=1.75cm of Groupe]
	
	\entity{Eleve}{
		nom\\
		prenom\\
		date\\
		fille
	}[right=1.75cm of dansGroupe]
	
	\relationWithAttributs{dansClasse}{
		entree\\
		sortie
	}[above=1.5cm of Eleve]
	
	\entity{TypeControle}{
		nc\\
		nom\\
		code\\
		appreciation\\
		decimale\\
		minima\\
		total\\
		modif
	}[below=0.5cm of Etablissement]
	
	\relation{filiationTypeControle}[right=0.5cm of TypeControle]
	\relation{typageControle}[below=0.75cm of TypeControle]
	
	\entity{Controle}{
		nc\\
		nom\\
		num\\
		dateTime\\
		decimale\\
		minima\\
		total\\
		code
	}[below=0.75cm of typageControle]
	
	\relation{obtenue}[below=0.85cm of Eleve]
	
	\relationWithAttribut{dansControle}{num}[right=1cm of Controle]
	
	\entity{Note}{
		dateTime\\
		saisie\\
		valeur
	}[below=0.85cm of obtenue]

	\relation{auControle}[left=5cm of Note]
	
	\relationWithAttributs{valide}{dateTime\\valeur}[below=1.25cm of Note]
	
	\entity{Point}{
		type\\
		valeur\\
		version
	}[below=1.25cm of valide]
	
	%\relation{priseEnCompte}[below=3cm of Point]
	
	\relationWithAttributs{ventile}{
		num\\
		numEpreuve}[left=1cm of Point]
	
	\entity{Enonce}{
		type\\
		version
	}[left=1cm of ventile]
	
	\relation{sommetSujet}[left=1cm of Enonce]
	
	\entity{Epreuve}{version}[left=0.5cm of sommetSujet]
	
	\arbreERD{Enonce}[above=0.5cm of Enonce]
	
	\relation{sommetBareme}[below=1cm of Epreuve]
	
	\entity{Bareme}{idCible\\cible\\type\\valeur}[below=1 cm of sommetBareme]
	
	\arbreERD{Bareme}[left=1cm of Bareme]
	
\lien{typageEtablissement}{TypeEtablissement}{$0-N$}
\lien{typageEtablissement}{Etablissement}{$0-N$}
\lien{Etablissement}{dansEtablissement}{$0-N$}
\lien{Niveau}{dansEtablissement}{$0-N$}
\lien{Niveau}{dansTypeEtablissement}{$1-N$}
\lien{TypeEtablissement}{dansTypeEtablissement}{$0-N$}
\lien{Niveau.north west}{filiationNiveau.west}{\begin{tabular}{c}precedent\\$0-N$\end{tabular}}
\lien{Niveau.north east}{filiationNiveau.east}{\begin{tabular}{c}suivant\\$0-N$\end{tabular}}
\lien{Annee}{pendant}{$0-N$}
\lien{Classe}{pendant}{$1$}
\lien{Classe}{duNiveau}{$1$}
\lien{duNiveau}{Niveau}{$0-N$}
\lien{Classe}{classeDans}{$1$}
\lien{Etablissement}{classeDans}{$0-N$}
\lien{Annee}{groupePour}{$0-N$}
\lien{Classe}{groupePour}{$0-N$}
\lien{Groupe}{groupePour}{$1$}
\lien{Classe}{dansClasse}{$0-N$}
%\lien{Classe}{controlePourClasse}{$0-N$}
%\lien{Groupe}{controlePourGroupe}{$0-N$}
%\lien{Controle.south east}{controlePourGroupe}{$0-N$}
\lien{Controle}{typageControle}{$1$}
\lien{TypeControle}{typageControle}{$0-N$}
\lien{Eleve}{dansGroupe}{$0-N$}
\lien{Eleve}{dansClasse}{$1-N$}
\lien{Groupe}{dansGroupe}{$0-N$}
%\lien{Controle}{controlePourClasse}{$0-1$}
\lien{Controle.south east}{auControle}{$0-N$}
\lien{Note}{auControle}{$1$}
\lien{Note}{obtenue}{$1$}
\lien{obtenue}{Eleve}{$0-N$}
\lien{Enonce}{filiationEnonce}{$1$}
\lien{Epreuve}{dansControle}{$0-N$}
\lien{Controle}{dansControle}{$0-N$}
\lienArbreERD{Enonce}
\lien{Point}{valide}{$0-N$}
\lien{Note}{valide}{$0-N$}
\lien{Enonce}{ventile}{$0-N$}
\lien{Point}{ventile}{$0-N$}
\lienArbreERD{Bareme}
\lien{Bareme}{filiationBareme}{$1$}
%\lien{Bareme}{priseEnCompte}{$0-1$}
%\lien{Point}{priseEnCompte}{$0-N$}
\lien{dansControle.east}{Eleve.south west}{$0-N$}
\lien{dansControle}{Groupe}{$0-N$}
\lien{dansControle}{Classe}{$0-N$}
\lien{TypeControle.north east}{filiationTypeControle.north}{\begin{tabular}{c}pere\\$0-1$\end{tabular}}
\lien{TypeControle.south east}{filiationTypeControle.south}{\begin{tabular}{c}fils\\$0-N$\end{tabular}}  
\lien{Epreuve}{sommetSujet}{$1$}
\lien{sommetSujet}{Enonce}{$0-N$}  
\lien{Enonce}{ventile}{$0-N$}
\lien{sommetBareme}{Bareme}{$0-1$}
\lien{sommetBareme}{Epreuve}{$1$} 
%\lien{ventile}{Epreuve}{$0-N$}
\end{tikzpicture}
\subsection{Tables}
\newpage
\begin{tikzpicture}[thick]
\scriptsize

	\tableEntity{TypeEtablissement}{
		nc&text&stringNotEmpty&nc&\\
		nom&text&stringNotEmpty&nm&
	}{
		\unique{nom}\\
		ModifControle
	}[\gui]

	\tableEntity{NiveauTypeEtablissement}{
		idNiveau&uint&idSup1&idNiv\\
		idTpEtab&uint&idSup1&idTE&
	}{
		\fkey{idNiveau}{Niveau}\\
		\fkey{idTpEtab}{TypeEtablissement}\\
		\unique{idTpEtab, idNiveau}
	}[right=1.2cm of TypeEtablissement,\gui]
	
	\tableEntity{FiliationNiveau}{
	idPrecedent&uint&idSup1&idP\\
	idSuivant&uint&idSup1&idS
	}{
		\fkey{idPrecedent}{Niveau}\\
		\fkey{idSuivant}{Niveau}\\
		\unique{idPrecedent, idSuivant}\\
		ModifControle
	}[right=1.2cm of NiveauTypeEtablissement,\gui]
	
	\tableEntity{EtablissementType}{
		idEtab&unit&idSup1&idEt\\
		idTpEtab&uint&idSup1&idTE
	}{
		\unique{idEtab, idTpEtab}
	}[below=0.3cm of TypeEtablissement,\gui]
	
	\tableEntity{Etablissement}{
		nc&text&stringNotEmpty&nc&\\
		nom&text&stringNotEmpty&nm&\\
	}{
		\unique{nom}\\
		ModifControle
	}[below=0.2cm of EtablissementType,\gui]
	
	\tableEntity{EtablissementNiveau}{
		idEtab&uint&idSup1&idEt&\\
		idNiveau&uint&idSup1&idNiv
	}{
		\fkey{idEtab}{Etablissement}\\
		\fkey{idNiveau}{Niveau}\\
		\unique{idEtab, idNiveau}
	}[below=.25cm of NiveauTypeEtablissement,\gui]

	\tableEntity{Niveau}{
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		type&uint&idSup1&tp
	}{
		\fkey{type}{Type}\\
		\unique{nom}\\
		ModifControle	
	}[below=0.5cm of FiliationNiveau,\gui]

	\tableEntity{Annee}{
		num&int&intSup0&num
	}{
		\unique{num}\\
		ModifControle
	}[below=0.15cm of Etablissement,\gui]
	
	\tableEntity{ClasseEleve}{
		idClasse&uint&idSup1&idCl\\
		idEleve&uint&idSup1&idEl\\
		entree&dateTime&dtValide&ent\\
		sortie&dateTime&dtValide&sort
	}{
		\fkey{idClasse}{Classe}\\
		\fkey{idEleve}{Eleve}\\
		\unique{idClasse, idEleve}
	}[below=0.25cm of Niveau,\gui]

	\tableEntity{Classe}{
		idAn&uint&idSup1&idAn\\
		idEtab&uint&idSup1&idEt\\
		idNiveau&uint&idSup1&idNv\\
		nc&text&stringNotEmpty&nc&\\
		nom&text&stringNotEmpty&nm&\\
		num&int&intSup0&num
	}{
		\fkey{idAn}{An}\\
		\fkey{idEtab}{Etablissement}\\
		\fkey{idNiveau}{Niveau}\\
		\unique{idAn,idEtab, idNiveau, num}\\
		ModifControle
	}[left=.8cm of ClasseEleve,\gui]

	\tableEntity{ClasseGroupe}{
		idAn&uint&idSup1Null&idAn&NULL\\
		idClasse&uint&idSup1Null&idCl&NULL\\
		idGroupe&uint&idSup1&idGr
	}{
		\fkey{idAn}{Annee}\\
		\fkey{idClasse}{Classe}\\
		\fkey{idGroupe}{Groupe}\\
		\unique{idAn, idGroupe}\\
		\unique{idClasse, idGroupe}
	}[below=0.25cm of Annee,\bdd]
	
	\tableEntity{Groupe}{
		alpha&int&int&al\\
		code&uint&code&cd\\
		nc&text&stringNotEmpty&nc&\\
		nom&text&stringNotEmpty&nm&\\
		type&uint&idSup1&tp\\
	}{
		\fkey{type}{Type}\\
		\unique{nom}
	}[below=0.25cm of ClasseGroupe,\bdd]
		
	\tableEntity{EleveGroupe}{
		idEleve&uint&idSup1&idEl\\
		idGroupe&uint&idSup1&idGr\\
		num&int&intSup0&num
	}{
		\fkey{idEleve}{Eleve}\\
		\fkey{idGroupe}{Groupe}\\
		\unique{idEleve, idGroupe}
	}[below=0.2cm of Classe,\bdd]
	
	\tableEntity{Eleve}{
		date&date&dtValide&dt\\
		fille&bool&bool&fl\\
		nom&text&stringNotEmpty&nm\\
		prenom&text&stringNotEmpty&pnm
	}{
		\unique{nom, prenom, date}\\
		ModifControle
	}[below=0.5cm of ClasseEleve,\gui]
	
	\tableEntity{Note}{
		idControle&uint&idSup1&idCtr\\
		idEleve&uint&idSup1&idEl\\
		dateTime&dateTime&dtCurrent&dt\\
		saisie&uint&code&ss\\
		valeur&int&int&vl
	}{
		\fkey{idControle}{Controle}\\
		\fkey{idEleve}{Eleve}\\
		\unique{idControle, idEleve}
	}[below=0.5cm of Eleve,\bdd]
	
	\tableEntity{ControleEpreuve}{
		idClasse&uint&idSup1&idCl&NULL\\
		idControle&uint&idSup1&idCtr\\
		idEleve&uint&idSup1&idEl&NULL\\
		idEpreuve&uint&idSup1&idEp\\
		idGroupe&uint&idSup1&idGr&NULL\\
		num&int&intSup-1&num&\\	
	}{
		\fkey{idClasse}{Classe}\\
		\fkey{idControle}{Controle}\\
		\fkey{idEleve}{Eleve}\\
		\fkey{idEpreuve}{Epreuve}\\
		\fkey{idGroupe}{Groupe}\\
		\unique{idControle, idClasse}\\
		\unique{idControle, idGroupe, num}\\
		\unique{idControle, idEleve}
	}[below=0.2cm of EleveGroupe,\bdd]

	\tableEntity{Valide}{
		idNote&uint&idSup1&idNt\\
		idPoint&uint&idSup1&idPt\\
		dateTime&dateTime&dtCurrent&dt\\
		valeur&int&int&vl
	}{
		\fkey{idNote}{Note}\\
		\fkey{idPoint}{Point}\\
		\unique{idNote, idPoint}
	}[below=0.5cm of Note,\bdd]

	\tableEntity{TypeControle}{
		appreciation&uint&code&app\\
		code&uint&code&cd\\
		decimale&int&decimale&dcm\\
		minima&int&intSup-1&min&\\
		modif&uint&code&md\\
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		parent&uint&idSup1&pt&NULL\\
		total&int&int&tt
	}{
		\fkey{parent}{TypeControle}\\
		\unique{nom}\\
		ArbresimpleModifControle
	}[below=0.5cm of Groupe,\bdd]

	\tableEntity{Controle}{
		idType&uint&idSup1&idTp\\
		code&uint&code&cd\\
		dateTime&dateTime&dtValide&dt\\
		decimale&int&decimale&dc\\
		minima&int&intSup-1&min&\\
		nc&text&stringNotEmpty&nc\\
		nom&text&stringNotEmpty&nm\\
		num&int&intSup0&num\\
		total&int&int&tt
	}{
		\fkey{idType}{TypeControle}\\
		\unique{nom}
	}[below=0.25cm of TypeControle,\bdd]
	
	\tableEntity{Point}{
		type&uint&idSup1&tp\\
		valeur&int&int&vl\\
		version&int&intSup0&ver
	}{
		\fkey{type}{Type}
	}[below=0.5cm of Valide,\bdd]

	\tableEntity{Epreuve}{
		idBareme&uint&idSup1&idEp\\
		idEnonce&uint&idSup1&idEn\\
		ensPoint&uint&id&ensPt\\
	}{
		\fkey{idBareme}{Bareme}\\
		\fkey{idEnonce}{Enonce}\\
		\unique{idBareme, idEnonce, ensPoint}
	}[below=0.25cm of ControleEpreuve,\bdd]

	\tableEntity{Enonce}{
		type&uint&idSup1&tp\\
		version&int&intSup0&ver\\
		ARBRE & ENONCE&
	}{
		\fkey{id}{ArbreEnonce}\\
		\fkey{type}{Type}\\
		Arbre
	}[below=0.3cm of Epreuve,\bdd]

	\tableEntity{EnoncePoint}
	{
		idEnonce&uint&idSup1&idEn\\
		idPoint&uint&idSup1&idPt\\
		ensPoint&uint&id&ensPt\\
		num&int&intSup0&num\\
	}{
		\fkey{idEnonce}{Enonce}\\
		\fkey{idPoint}{Point}\\
		\unique{idEnonce, ensPoint, num}
	}[below=0.5 of Point,\bdd]

	\tableEntity{Bareme}{
		idCible&uint&idSup1&idPt&\\
		cible&int&int&cb\\
		type&uint&idSup1&tp\\
		valeur&double&double&vl\\
		ARBRE & BAREME&
	}{
		\fkey{id}{ArbreBareme}\\
		\fkey{type}{Type}\\
		Arbre
	}[below=0.25cm of Enonce,\bdd]


\lkey{TypeEtablissement}{NiveauTypeEtablissement}
\lkey{Etablissement}{EtablissementNiveau}
\lkey{TypeEtablissement}{EtablissementType}
\lkey{Etablissement}{EtablissementType}
\lkey{Niveau.north}{FiliationNiveau.south west}
\lkey{Niveau.north}{FiliationNiveau.south east}
\lkey{Niveau.north west}{NiveauTypeEtablissement}
\lkey{Niveau}{EtablissementNiveau}
\lkey{Etablissement}{Classe}
\lkey{Niveau.south west}{Classe.north east} 
\lkey{Classe}{ClasseEleve} 
\lkey{Annee}{Classe}
\lkey{Annee}{ClasseGroupe}
\lkey{Classe}{ClasseGroupe} 
\lkey{Groupe}{ClasseGroupe}
\lkey{Eleve}{ClasseEleve}
\lkey{Eleve}{EleveGroupe}
\lkey{Groupe}{EleveGroupe}
\lkey{Eleve}{Note}
\lkey{Classe.south east}{ControleEpreuve.north east} 
\lkey{Groupe}{ControleEpreuve}
\lkey{Eleve}{ControleEpreuve.north east} 
\lkey{Controle.north east}{ControleEpreuve.south west} 
\lkey{Enonce}{Epreuve} 
\lkey{Note}{Valide}
\lkey{TypeControle}{Controle}
\lkey{Point}{Valide}
\lkeyloop{TypeControle}
\lkey{Point}{EnoncePoint}
%\lkey{Point}{Bareme}
\lkey{Controle.north east}{Note.south west}
\lkey{Bareme.north west}{Epreuve.south west}
\lkey{Epreuve}{ControleEpreuve}
\lkey{Enonce}{EnoncePoint} 
\end{tikzpicture}	
\end{document}